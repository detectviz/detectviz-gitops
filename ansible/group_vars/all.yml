---
# ============================================
# Detectviz Kubernetes 集群全域變數配置
# ============================================

# 集群基本資訊
cluster_name: detectviz # 集群名稱，用於識別 Kubernetes 集群
kubernetes_version: "1.30.2" # Kubernetes 版本號
kubernetes_package_version: "" # Kubernetes 套件版本
control_plane_endpoint: "k8s-api.detectviz.internal:6443" # 控制平面端點，指向 HA VIP
cluster_vip: "192.168.0.10" # HA VIP

# 網路配置
pod_network_cidr: "10.244.0.0/16" # Pod 網路 CIDR
service_cidr: "10.96.0.0/12" # Service 網路 CIDR

# 容器運行時配置
containerd_sandbox_image: "registry.k8s.io/pause:3.9" # Containerd 沙箱鏡像

# CNI (Container Network Interface) 配置
cni_provider: "calico"
calico_manifest_url: "https://raw.githubusercontent.com/projectcalico/calico/v3.27.3/manifests/calico.yaml" # Calico CNI 插件安裝清單 URL
calico_manifest_local_path: "/tmp/calico-patched.yaml"

# K8s HA 配置
kube_vip_version: "v0.7.1"

# ============================================
# DNS 和網路配置區塊
# ============================================
detectviz_hosts_block: |
  # BEGIN ANSIBLE MANAGED BLOCK - Detectviz Cluster Hosts
  # Detectviz 集群主機解析配置，由 Ansible 自動管理，請勿手動修改
  192.168.0.11 master-1.detectviz.internal    # Master 節點 1 - 控制平面主要節點
  192.168.0.12 master-2.detectviz.internal    # Master 節點 2 - 控制平面 HA 節點
  192.168.0.13 master-3.detectviz.internal    # Master 節點 3 - 控制平面 HA 節點
  192.168.0.14 app-worker.detectviz.internal # 應用 Worker 節點 - 用於部署應用服務
  192.168.0.10 k8s-api.detectviz.internal     # Kubernetes API 虛擬 IP - 負載均衡訪問點
  # END ANSIBLE MANAGED BLOCK

# ============================================
# 部署控制變數
# ============================================
reset_cluster: false # 是否重置現有集群，設為 true 會清除所有 Kubernetes 配置和資料
force_rejoin: false # 是否強制重新加入節點，設為 true 會重置並重新加入所有 worker 節點
