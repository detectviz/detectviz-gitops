# ============================================
# Detectviz Platform - Ansible Inventory
# Detectviz 平臺 Ansible 主機庫存配置
# ============================================
# 自動生成於：Mon Nov 10 21:49:30 CST 2025
# 此檔案由 Terraform 自動產生，請勿手動編輯

# Master 節點組 - 控制平面節點，提供 Kubernetes API Server、Scheduler、Controller Manager
[masters]
master-1 ansible_host=192.168.0.11 ansible_user=ubuntu ansible_ssh_private_key_file=~/.ssh/id_rsa  # master-1.detectviz.internal
master-2 ansible_host=192.168.0.12 ansible_user=ubuntu ansible_ssh_private_key_file=~/.ssh/id_rsa  # master-2.detectviz.internal
master-3 ansible_host=192.168.0.13 ansible_user=ubuntu ansible_ssh_private_key_file=~/.ssh/id_rsa  # master-3.detectviz.internal

# Worker 節點組 - 工作節點，用於運行應用 Pod、Ceph OSD、Kubernetes Overlay
[workers]
app-worker ansible_host=192.168.0.14 ansible_user=ubuntu ansible_ssh_private_key_file=~/.ssh/id_rsa      # app-worker.detectviz.internal

# 集群組 - 包含所有 Kubernetes 節點
[k8s_cluster:children]
masters    # 引用 masters 組
workers    # 引用 workers 組

# 集群全域變數 - 適用於所有 Kubernetes 節點
[k8s_cluster:vars]
ansible_python_interpreter=/usr/bin/python3
kubernetes_version=1.32.0                         # Kubernetes 版本號
pod_network_cidr=10.244.0.0/16    # Pod 網路 CIDR
service_cidr=10.96.0.0/12            # Service 網路 CIDR
control_plane_vip=192.168.0.10                    # 控制平面虛擬 IP，用於負載均衡

# 網路配置
network_mtu=9000                              # 網路 MTU (支援巨型幀)
k8s_overlay_bridge=vmbr1                # Kubernetes Overlay 網路橋接器
cluster_network=10.0.0.0/24  # vmbr1 集群網路
cluster_domain=cluster.internal  # Kubernetes 集群內部域名

# 網路介面對應 (virtio 網路設備順序)
# ens18: 外部網路 (vmbr0 - 管理網路 + 應用流量) - 所有節點
# ens19: 內部集群網路 (vmbr1 - Kubernetes 節點間通訊) - 所有節點
